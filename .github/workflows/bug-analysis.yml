name: Bug Analysis

on:
 issues:
  types: [labeled]

jobs:
 analyze-bug:
  # "ë²„ê·¸" ë˜ëŠ” "bug" ë¼ë²¨ì´ ì¶”ê°€ë  ë•Œë§Œ ì‹¤í–‰
  if: github.event.label.name == 'ë²„ê·¸' || github.event.label.name == 'bug'
  runs-on: ubuntu-latest
  permissions:
   contents: read
   pull-requests: read
   issues: write
   id-token: write

  steps:
   - name: Checkout repository
     uses: actions/checkout@v4
     with:
      fetch-depth: 1

   - name: Analyze bug with Claude
     uses: anthropics/claude-code-action@v1
     with:
      claude_code_oauth_token: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
      prompt: |
       ## ë¶„ì„ ëŒ€ìƒ ì´ìŠˆ
       - ì´ìŠˆ ë²ˆí˜¸: #${{ github.event.issue.number }}
       - ì œëª©: ${{ github.event.issue.title }}
       - ë³¸ë¬¸:
       ${{ github.event.issue.body }}

       ## ì—­í• 
       ë‹¹ì‹ ì€ ë²„ê·¸ë¥¼ ì§ì ‘ í•´ê²°í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì‘ì—…ìê°€ ë¬¸ì œë¥¼ ë¹ ë¥´ê²Œ íŒŒì•…í•˜ê³  í•´ê²°í•  ìˆ˜ ìˆë„ë¡ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œê³µí•˜ëŠ” ì¡°ì‚¬ê´€ì…ë‹ˆë‹¤.

       ## ì›ì¹™
       - í™•ì •ì ì¸ ê²°ë¡ ì„ ë‚´ë¦¬ì§€ ë§ˆì„¸ìš”. "~ì¼ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤", "~ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”" í˜•íƒœë¡œ ì‘ì„±í•˜ì„¸ìš”.
       - ê°€ëŠ¥ì„± ìˆëŠ” ì›ì¸ë“¤ì„ ë‚˜ì—´í•˜ê³ , ê°ê°ì„ ê²€ì¦í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œì‹œí•˜ì„¸ìš”.
       - ì‘ì—…ìê°€ ë””ë²„ê¹…ì„ ì‹œì‘í•  ìˆ˜ ìˆëŠ” ì§„ì…ì (íŒŒì¼, í•¨ìˆ˜, ë¼ì¸)ì„ ëª…í™•íˆ ì•ˆë‚´í•˜ì„¸ìš”.

       ## ë¶„ì„ ì ˆì°¨
       1. ì´ìŠˆì—ì„œ ë²„ê·¸ ì¦ìƒ íŒŒì•…
       2. ê´€ë ¨ ì½”ë“œ ì˜ì—­ íƒìƒ‰
       3. ì˜ì‹¬ë˜ëŠ” ì›ì¸ í›„ë³´ ë„ì¶œ
       4. ê° í›„ë³´ë³„ ê²€ì¦ ë°©ë²• ì œì•ˆ

       ## ì‘ë‹µ í˜•ì‹
       ### ğŸ” ë²„ê·¸ ì¡°ì‚¬ ê²°ê³¼

       **ì¦ìƒ ìš”ì•½**: [ì´ìŠˆì—ì„œ íŒŒì•…í•œ ì¦ìƒ]

       **ì¡°ì‚¬ ë²”ìœ„**:
       - [íŒŒì¼ëª…](https://github.com/${{ github.repository }}/blob/${{ github.event.repository.default_branch }}/íŒŒì¼ê²½ë¡œ#Lë¼ì¸ë²ˆí˜¸) - ê´€ë ¨ì„± ì„¤ëª…

       **ì˜ì‹¬ ì›ì¸**:
       1. [ê°€ëŠ¥ì„± 1] - ê²€ì¦ ë°©ë²•: [ì–´ë–»ê²Œ í™•ì¸í•  ìˆ˜ ìˆëŠ”ì§€]
       2. [ê°€ëŠ¥ì„± 2] - ê²€ì¦ ë°©ë²•: [ì–´ë–»ê²Œ í™•ì¸í•  ìˆ˜ ìˆëŠ”ì§€]

       **ë””ë²„ê¹… ì‹œì‘ì **:
       - [íŒŒì¼ëª…](https://github.com/${{ github.repository }}/blob/${{ github.event.repository.default_branch }}/íŒŒì¼ê²½ë¡œ#Lë¼ì¸ë²ˆí˜¸) - í™•ì¸ ë°©ë²•

       ---
       *ğŸ¤– ì´ ë¶„ì„ì€ AIê°€ ìë™ ìƒì„±í•œ ì´ˆê¸° ì¡°ì‚¬ ê²°ê³¼ì…ë‹ˆë‹¤.*
       *âš ï¸ ìœ„ ë‚´ìš©ì€ ì¶”ì¸¡ì— ê¸°ë°˜í•˜ë¯€ë¡œ, ì‹¤ì œ ìˆ˜ì • ì „ ì§ì ‘ ê²€ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.*
